btcwatch
========

About
-----

btcwatch is a program that will allow its users to view the current exchange rate of the popular cryptocurrency Bitcoin in multiple currencies.

Dependencies
------------

* libcurl
* jansson

Installing
----------

### Run the configure script ###

	$ ./configure
	
By default, btcwatch will be installed to /usr/local/. You can spedify a different prefix by setting `--prefix`.

### Build btcwatch with `make` ###

You can either build a standard or debug build, and you have a choice of using either MtGox or BTC-E as a source. An example non-debug build using MtGox:

	$ CFLAGS="-DDEBUG=0 -DMT_GOX_API=1" make

Macros that have particular effect in building btcwatch:

* `MT_GOX_API` - uses MtGox's API
* `BTC_E_API` - uses BTC-E's API
* `DEBUG` - makes btcwatch very verbose for debugging purposes

In addition, optimisation is left to the user. For a fairly optimised build, add `-march=native -O2` to your CFLAGS, and for debugging, use `-march=native -Og -g`.

### Install btcwatch ###

Install (as root) either normally, or as a stripped binary (the latter will only strip the normal build):

	# make install

or

	# make install-strip

Using btcwatch
--------------

Using btcwatch is incredibly straightforward. To get buy and sell prices, run btcwatch with no arguments:

	$ btcwatch
	result: success
	buy: $ 132.850769 USD
	sell: $ 133.990005 USD

btcwatch will automatically print verbose output (`-v`) when no arguments are provided, with the currency string at the end of the value, and a identifier and currency sign before.
To only request one item, run btcwatch with one of `-p` (checks for a successful JSON string from MtGox), `-b` (buy price), or `-s` (sell price). The order you specify those options does matter, as that is the order that they will be processed and printed to the screen (this is useful for printing results in multiple currencies), for example:

	$ btcwatch -v -b
	buy: $ 133.750000 USD

	$ btcwatch -v -sb
	sell: $ 133.979996 USD
	buy: $ 133.750000 USD

	$ btcwatch -v -sbp
	sell: $ 133.979996 USD
	buy: $ 133.750000 USD
	result: success

Removing the `-v` (verbose) option will remove extra information from output:

	$ btcwatch -sbp
	133.979996
	133.750000
	success

To change the currency from USD to something else, use the `-c` (currency) option:

	$ btcwatch -vc gbp -b
	buy: £ 81.789719 GBP

	$ btcwatch -vc jpy -b
	buy: ¥ 18019.951172 JPY

	$ btcwatch -vc eur -b
	buy: € 98.699997 EUR

You can use uppercase if you want. The currency string is converted to uppercase by btcwatch anyway:

	$ btcwatch -vc GBP -b
	buy: £ 81.807930 GBP

Specify an amount of Bitcoin to convert with the `-n` option:

	$ btcwatch -vn1.28 -b
	buy: $ 239.360000 USD

You can also store the current price of Bitcoin with `-S`, and compare it later with `-C`:

	# bought some BTC for $100

	$ btcwatch -S  # stores current price
	
	# (after a reasonable amount of time)
	
	$ btcwatch -vC
	buy: UP $ 100 (100.000000 -> 200.000000)
	sell: UP $ 100 (100.000000 -> 200.000000)
	(Since Thu Jan 1 00:00:00 1970)
	
	# profit!
	

Cleaning up
-----------

To remove all files generated by make, run:

	$ make clean

To remove the above and all files generated by `./configure` (reverting the source tree to its original state), run:

	$ make distclean

Unsinstalling
-------------

(as root):

	# make uninstall

